from collections import deque
class Node:
    def __init__(self, d):
        self.val = d
        self.left = None
        self.right = None
def binarytree(l):
    if not l or l[0]=='null':
        return None
    root=Node(l[0])
    q=deque([root])
    i=1
    while(i<len(l)):
        cur=q.popleft()
        if i <len(l):
            cur.left=Node(l[i])
            q.append(cur.left)
            i+=1

        if i<len(l):
            cur.right=Node(l[i])
            q.append(cur.right)
            i+=1
    return root

def solve(root, mi=float('-inf'), ma=float('inf')):
    if not root:
        return True
    if not (mi < root.val < ma):
        return False
    return (solve(root.left, mi, root.val) and
            solve(root.right, root.val, ma))

if __name__ == "__main__":
    n = int(input())
    l = list(map(int, input().split()))
    root = binarytree(l)
    
    if solve(root):
        print("The book collection is a valid binary search tree.")
    else:
        print("The book collection is NOT a valid binary search tree.")
